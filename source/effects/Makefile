DIRS := $(shell ls -l | grep ^d | sed 's:.*\ \(.*\):\1:')

MAKE := make --no-print-directory

all :
	@for d in $(DIRS) ; do \
	   echo "-----------------------------------------------------------" ;\
	   echo "$$d" ;\
	   echo "-----------------------------------------------------------" ;\
	   (cd $$d && $(MAKE) all) ;\
	 done

clean :
	@for d in $(DIRS) ; do \
	   echo "-----------------------------------------------------------" ;\
	   echo "$$d" ;\
	   echo "-----------------------------------------------------------" ;\
	   (cd $$d && $(MAKE) clean) ;\
	 done
